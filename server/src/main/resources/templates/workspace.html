<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:title="${groupName}">Work Space</title>
    <style>
        body {
            width: 100vw;
            margin: 0;
            -ms-overflow-style: none;
        }

        ::-webkit-scrollbar {
            display: none;
        }

        .super-space-app {
            width: 100vw;
            display: inline-flex;
        }

        .sidebar-section {
            display: flex;
            flex-flow: column;
            padding: 2px 14px;
            justify-content: left;
        }

        .sidebar-section .items {
            margin: 5px;
        }

        #super-space-app__sidebar {
            display: flex;
            width: 240px;
            height: 100vh;
            background-color: rgb(251, 251, 250);
        }

        #logo {
            display: flex;
            height: 60px;
            justify-content: center;
            align-items: center;
            font-size: 22px;
        }

        #info {
            min-height: 150px;
        }

        #group-list {
            min-height: 200px;
        }

        .super-space-contents {
            display: flex;
            flex-flow: column;
            width: 100%;
            margin: 0;
            overflow: hidden;
        }

        .header {
            height: 60px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-flow: row;
            padding: 0 12px;
        }

        .content {
            align-items: center;
            margin: 10px;
        }

        .sidebar-elements {
            padding: 3px 10px;
            cursor: pointer;
        }

        .level2 {
            padding-left: 15px;
        }

        #group-name {
            display: inline-flex;
        }

        #user-name {
            display: inline-flex;
        }

    </style>
</head>
<body>
<div class="super-space-app">
    <div id="super-space-app__sidebar">
        <div style="width: 240px;">
            <div id="logo" class="sidebar-section">
                <div>SUPER SPACE</div>
            </div>
            <div id="info" class="sidebar-section">
                <div style="width: 100%">
                    <div class="items" th:onclick="|location.href='@{/user/info}'|">내 활동</div>
                    <div class="items">알림</div>
                </div>
            </div>
            <div id="group-list" class="sidebar-section">
                <div class="sidebar-header">
                    <span>그룹 리스트</span>
                    <button type="button" onclick="moveToCreateGroupPage()">생성</button>
                    <button type="button"
                            onclick="moveToGroupManagingPage()"
                            th:if="${#lists.size(sideBar.groups) > 0}">
                        관리
                    </button>
                </div>
                <div id="group-container" th:each="group: ${sideBar.groups}">
                    <div class="sidebar-elements"
                         th:utext="|> ${group.name}|"
                         th:onclick="|location.href='@{/workspace/{groupUrl}(groupUrl=${group.urlPath})}'|">
                        > GROUP NAME
                    </div>
                </div>
            </div>
            <div id="category" class="sidebar-section">
                <div class="sidebar-header">
                    <span>카테고리</span>
                    <button type="button" onclick="moveToCreateCategoryPage()">생성</button>
                    <button type="button"
                            th:if="${#lists.size(sideBar.categories) > 0}"
                            onclick="moveToManageCategoryPage()">
                        관리
                    </button>
                </div>
                <div id="category-container" th:each="category: ${sideBar.categories}">
                    <div class="sidebar-elements"
                         th:utext="|> ${category.name}|"
                         th:onclick="|location.href='@{{categoryId}(categoryId=${category.categoryId})}'|">
                        > CATEGORY
                    </div>
                    <div class="sidebar-elements level2"
                         th:each="category2: ${category.subCategories}">
                        <span th:utext="|> ${category2.name}|"> > TT </span>
                        <div class="sidebar-elements"
                             th:each="category3: ${category2.subCategories}">
                            <span th:utext="|> ${category3.name}|"> > TT </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="super-space-contents">
        <div style="width: 100%">
            <div class="header">
                <div id="group-name" th:text="${appHeader.groupName}">GROUP NAME</div>
                <div id="user-name" th:text="${appHeader.userName}">USER NAME</div>
            </div>
        </div>
        <div class="header">
            카테고리 헤더
        </div>
        <div class="super-space-contents content">
            현재 그룹페이지의 최신 게시물 10개 보여주기
        </div>
    </div>
</div>
</body>
<script src="https://code.jquery.com/jquery-3.4.1.js"></script>
<script src="../static/js/fetch.js"></script>
<script src="/js/fetch.js"></script>
<script>
    const currentPage = window.location.pathname;

    function moveToCreateGroupPage() {
        window.location.href = "/workspace/new";
    }

    function moveToGroupManagingPage() {
        window.location.href = currentPage + "/manage";
    }

    function moveToCreateCategoryPage() {
        window.location.href = currentPage + "/new-category";
    }

    function moveToManageCategoryPage() {
        window.location.href = currentPage + "/category";
    }
</script>
</html>